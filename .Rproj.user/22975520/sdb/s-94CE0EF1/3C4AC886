{
    "contents" : "---\ntitle: \"2005 SMP Data Quality Check\"\nauthor: \"Brian Maschhoff\"\ndate: \"October 21, 2015\"\noutput: html_document\n---\n\nThis is an R Markdown document. Markdown is a simple formatting syntax for authoring \n\n```{r, echo=FALSE}\nsuppressWarnings(suppressMessages(library(ggplot2)))\nsuppressWarnings(suppressMessages(library(dplyr)))\nsuppressWarnings(suppressMessages(library(lubridate)))\nsuppressWarnings(suppressMessages(library(reshape2)))\nsuppressWarnings(suppressMessages(library(RSmoltMon)))\nsuppressWarnings(suppressMessages(library(knitr)))\nft_theme = function (axis.text.size=1,axis.title.size=1){theme_bw() + theme(axis.text = element_text(size = rel(axis.text.size))) + theme(axis.title = element_text(size = rel(axis.title.size)))}\n\n```\n\n```{r,echo=FALSE}\n#read detections data (Humpty Dumpty worksheet from 2005 MLE.xlsx)\ndetections <- parseDetections(read.csv(\"detections.csv\"))\n#read releases data (releases worksheet from 2005 MLE.xlsx)\nreleases <- read.csv(\"releases.csv\")\n#read smp data (smp worksheet from 2005 MLE.xlsx)\nsmp <- read.csv(\"smp.csv\")\n#read csv with PTAGIS release dates for each Mark File\nmfiles <- read.csv(\"AllMarkFiles.csv\")\nops <- read.csv(\"operations.csv\")\n\nsubyearlings <- getSubyearlings(detections)\nyearlings <- getYearlings(detections)\n#add release date\nsubyearlings1 <- addReleaseDate(subyearlings,releases,PTAGIS=FALSE)\n#add PTAGIS release date\nsubyearlings2 <- addReleaseDate(subyearlings1,mfiles,PTAGIS=TRUE)\n\nsample.data <- getSampleData(subyearlings,smp)\n```\n\n## GRJ Operational Dates and Incidents\n\n```{r, echo=FALSE, fig.height=3, fig.width=10}\nplotOperations(ops) + ylab(\"\") + ft_theme()\n```\n\n```{r, echo=FALSE}\nops1 <- data.frame(operation=ops$operation,period=paste(getSmallDate(ops$start),getSmallDate(ops$stop),sep=\"-\"),message=ops$message,reference=ops$reference)\nkable(ops1, format = \"markdown\", padding = 2,row.names=FALSE)\n```\n\n## Subyearling Arrival at GRJ \n\n```{r, echo=FALSE, fig.height=10, fig.width=10}\nrel <- data.frame(release=releases$name,release.date=mdy(releases$Start),Group=releases$Group,PIT.tagged=releases$PIT.tagged)\nrel <- dplyr::filter(rel,Group==\"Production\",PIT.tagged>0)\nplotArrivals(subyearlings) +  geom_vline(aes(xintercept=as.numeric(release.date)), data=rel) + ft_theme()\n```\n\n## Check Release Dates vs. GRJ Arrival\n\n```{r, echo=FALSE, fig.height=10, fig.width=10}\ncheckReleaseDates(subyearlings2) + ft_theme()\n```\n\n\n## Subyearling Last Detection Location \n\n```{r, echo=FALSE, fig.height=8, fig.width=10}\nplotDetections(subyearlings) + ft_theme()\n```\n\n### Sample Gate Outage 5/30-5/31 \n\n```{r, echo=FALSE, fig.height=7, fig.width=10}\nplotDetections(dplyr::filter(subyearlings,date1>lubridate::ymd(\"2005-05-29\"),date1<lubridate::ymd(\"2005-06-01\"))) + scale_x_datetime(breaks=scales::date_breaks(\"1 day\"),labels=scales::date_format(\"%b-%d\")) + ft_theme()\n```\n\n### Sample Gate Outage 10/10-10/15 \n\n```{r, echo=FALSE, fig.height=5, fig.width=10}\nplotDetections(dplyr::filter(subyearlings,date1>lubridate::ymd(\"2005-10-8\"),date1<lubridate::ymd(\"2005-10-17\"))) + scale_x_datetime(breaks=scales::date_breaks(\"1 day\"),labels=scales::date_format(\"%b-%d\")) + ft_theme()\n```\n\n## Check Proximity of Untagged Releases\n\n```{r, echo=FALSE, fig.height=8, fig.width=10}\nplotMarkingTagging(releases) + ft_theme()\n\n```\n\n## Check Proximity of Untagged Releases 2\n\n```{r, echo=FALSE, fig.height=8, fig.width=10}\nplotMarkingTagging(releases,mode=\"release\") + ft_theme()\n```\n\n## Compare Sample Rates \n\n```{r, echo=FALSE, fig.height=8, fig.width=10}\nplotSampleRates(sample.data,facet=FALSE) + ft_theme()\n```\n\n## Compare Sample Rates 2\n\n```{r, echo=FALSE, fig.height=8, fig.width=10}\nplotSampleRates(sample.data,facet=TRUE) + ft_theme()\n```\n\n\n",
    "created" : 1445452488875.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "203893190",
    "id" : "3C4AC886",
    "lastKnownWriteTime" : 1445557301,
    "path" : "~/SMP/2005/DataQuality.Rmd",
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "type" : "r_markdown"
}